FACT:
	Inherits: ^BaseBuilding
	Inherits@shape: ^3x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Inherits@BOTI: ^BotFallbackInsurance
	WithColoredOverlay@Invulnerability:
		RequiresCondition: invulnerability-crate-collected
        Color: 800000A3
	DamageMultiplier@Invulnerability:
		RequiresCondition: invulnerability-crate-collected
		Modifier: 0
	TimedConditionBar@Invulnerability:
		Condition: invulnerability-crate-collected
	ExternalCondition@Invulnerability:
		Condition: invulnerability-crate-collected
	TransferTimedExternalConditionOnTransform:
		Condition: invulnerability-crate-collected
	Selectable:
		Bounds: 3072, 2048
	Valued:
		Cost: 2500
	Tooltip:
		Name: Construction Yard
	Building:
		Footprint: xxx xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 90000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c512
	Production:
		Produces: Building.GDI, Building.Nod, Defense.GDI, Defense.Nod, Building.BossGDI, Defense.BossGDI, Building.BossNod, Defense.BossNod
        PauseOnCondition: build-incomplete || emp-affected-structure
	Transforms:
		RequiresCondition: factundeploy
		PauseOnCondition: being-demolished || build-incomplete || emp-affected-structure || cant-undeploy
		IntoActor: mcv
		Offset: 1,1
		Facing: 432
	TransformsIntoMobile:
		RequiresCondition: factundeploy
		Locomotor: tracked-crusher
		RequiresForceMove: true
	TransformsIntoPassenger:
		RequiresCondition: factundeploy
		CargoType: Vehicle
		RequiresForceMove: true
	TransformsIntoRepairable:
		RequiresCondition: factundeploy
		RepairActors: fix, fix2
		RequiresForceMove: true
	TransformsIntoTransforms:
		RequiresCondition: factundeploy && build-incomplete
	GrantConditionOnDamageState@undeploy:
		Condition: cant-undeploy
		ValidDamageStates: Heavy, Critical
	GrantConditionOnPrerequisite@GLOBALFACTUNDEPLOY:
		Condition: factundeploy
		Prerequisites: global-factundeploy
	ProductionQueue@GDIBuilding:
		Type: Building.GDI
		DisplayOrder: 0
		Factions: gdi, gdia, gdib, gdic
		Group: Building
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@NodBuilding:
		Type: Building.Nod
		DisplayOrder: 0
		Factions: nod, noda, nodb, nodc
		Group: Building
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@BossGDIBuilding:
		Type: Building.BossGDI
		DisplayOrder: 0
		Factions: bossgdi
		Group: Building
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@BossNodBuilding:
		Type: Building.BossNod
		DisplayOrder: 0
		Factions: bossnod
		Group: Building
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@GDIDefense:
		Type: Defense.GDI
		DisplayOrder: 1
		Factions: gdi, gdia, gdib, gdic
		Group: Defense
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@NodDefense:
		Type: Defense.Nod
		DisplayOrder: 1
		Factions: nod, noda, nodb, nodc
		Group: Defense
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@BossGDIDefense:
		Type: Defense.BossGDI
		DisplayOrder: 1
		Factions: bossgdi
		Group: Defense
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@BossNodDefense:
		Type: Defense.BossNod
		DisplayOrder: 1
		Factions: bossnod
		Group: Defense
		LowPowerModifier: 150
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	BaseBuilding:
	ProductionBar@BuildingGDI:
		ProductionType: Building.GDI
	ProductionBar@BuildingNod:
		ProductionType: Building.Nod
	ProductionBar@BuildingBossGDI:
		ProductionType: Building.BossGDI
	ProductionBar@BuildingBossNod:
		ProductionType: Building.BossNod
	ProductionBar@DefenseGDI:
		ProductionType: Defense.GDI
		Color: 8A8A8A
	ProductionBar@DefenseNod:
		ProductionType: Defense.Nod
		Color: 8A8A8A
	ProductionBar@DefenseBossGDI:
		ProductionType: Defense.BossGDI
		Color: 8A8A8A
	ProductionBar@DefenseBossNod:
		ProductionType: Defense.BossNod
		Color: 8A8A8A
	BaseProvider:
		PauseOnCondition: being-captured
		Range: 15c0
	WithBuildingBib:
	WithBuildingPlacedAnimation:
		RequiresCondition: !build-incomplete
	Power:
		Amount: 30
        RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	Buildable:
        BuildDuration: 3900
        BuildDurationModifier: 100
		BuildPaletteOrder: 11
		Prerequisites: anytier3, anyfix, ~techlevel.6
		Queue: Building.GDI, Building.BossGDI, Building.Nod, Building.BossNod
		Description: Builds Structures and Defenses.
	ProductionCostMultiplier@EXPENSIVEMCV:
		Multiplier: 200
		Prerequisites: global-expensivemcv
	ProductionTimeMultiplier@EXPENSIVEMCV:
		Multiplier: 200
		Prerequisites: global-expensivemcv
	RenderSprites:
		Image: fact
		FactionImages:
            gdi: gdifact
            gdia: gdifact
            gdib: gdifact
            gdic: gdifact
            bossgdi: gdifact
			nod: nodfact
			noda: nodfact
			nodb: nodfact
			nodc: nodfact
            bossnod: nodfact
    AcceptsDeliveredCash:
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	SpawnActorsOnSell:
		ActorTypes: e6,tecn,tecn,tecn,e1,e1
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	DamageMultiplier@IsConyard:
		Modifier: 90
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-5
	GrantConditionOnBotOwner@botinsurance:
		Condition: bot-insurance-enabler
		Bots: normalai
	SpawnActorOnDeath@HUSK:
		Actor: FACT.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

NUKE:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 2048, 2048
	HitShape:
		TargetableOffsets: 630,299,0
	Valued:
		Cost: 300
	Tooltip:
		Name: Power Plant
	ProvidesPrerequisite:
		Prerequisite: anypower
	Buildable:
		BuildDuration: 600
        BuildDurationModifier: 100
		BuildPaletteOrder: 3
		Prerequisites: fact
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Generates a standard amount of power.
	Building:
		Footprint: Xx xx
		Dimensions: 2,2
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 40000
	RevealsShroud:
		Range: 2c512
	WithBuildingBib:
	Power:
		Amount: 100
        RequiresCondition: !build-incomplete && !emp-affected-structure && !power-outage
    PowerMultiplier@gdib:
        Modifier: 150
        RequiresCondition: owner.is.gdib
    GrantConditionOnFaction@gdib:
		Condition: owner.is.gdib
		Factions: gdib
		ResetOnOwnerChange: True
	ScalePowerWithHealth:
	RenderSprites:
		Image: nuke
		FactionImages:
			nod: nodnuke
            noda: nodnuke
            nodb: nodnuke
            nodc: nodnuke
            bossnod: nodnuke
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	AffectedByPowerOutage:
		Condition: power-outage
	InfiltrateForPowerOutage:
		Types: SpyInfiltrate, SpyInfiltrate2
        Duration: 750
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate, SpyInfiltrate2
	WithDecoration@PowerOutage:
		Image: nopower
		Palette: chrome
		Sequence: powerdown-blocked
		Position: Center
		BlinkInterval: 15
		BlinkPattern: on, off
		RequiresCondition: power-outage
		RequiresSelection: False
		ValidRelationships: Ally, Neutral, Enemy
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: NUKE.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

NUK2:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 2048, 2048
	HitShape:
		TargetableOffsets: 630,299,0
	Valued:
		Cost: 500
	Tooltip:
		Name: Advanced Power Plant
	ProvidesPrerequisite:
		Prerequisite: anypower
	Buildable:
		BuildDuration: 1200
        BuildDurationModifier: 100
		BuildPaletteOrder: 7
		Prerequisites: anyhq, ~techlevel.5
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Provides more power, cheaper than keep\nbuilding the standard Power Plant.
	Building:
		Footprint: Xx xX
		Dimensions: 2,2
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 60000
	RevealsShroud:
		Range: 2c512
	WithBuildingBib:
	Power:
		Amount: 200
        RequiresCondition: !build-incomplete && !emp-affected-structure && !power-outage
    PowerMultiplier@gdib:
        Modifier: 150
        RequiresCondition: owner.is.gdib
    GrantConditionOnFaction@gdib:
		Condition: owner.is.gdib
		Factions: gdib
		ResetOnOwnerChange: True
	ScalePowerWithHealth:
	RenderSprites:
		Image: nuk2
		FactionImages:
			nod: nodnuk2
            noda: nodnuk2
            nodb: nodnuk2
            nodc: nodnuk2
            bossnod: nodnuk2
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	AffectedByPowerOutage:
		Condition: power-outage
	InfiltrateForPowerOutage:
		Types: SpyInfiltrate, SpyInfiltrate2
        Duration: 750
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate, SpyInfiltrate2
	WithDecoration@PowerOutage:
		Image: nopower
		Palette: chrome
		Sequence: powerdown-blocked
		Position: Center
		BlinkInterval: 15
		BlinkPattern: on, off
		RequiresCondition: power-outage
		RequiresSelection: False
		ValidRelationships: Ally, Neutral, Enemy
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: NUK2.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

NUK3:
	Inherits: ^BaseBuilding
	Inherits@shape: ^3x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 3072, 2048
		DecorationBounds: 3072, 2148, 0, 0
	HitShape:
		TargetableOffsets: 630,299,0
	Valued:
		Cost: 700
	Tooltip:
		Name: Hi-Tech Power Plant
	ProvidesPrerequisite:
		Prerequisite: anypower
	Buildable:
		BuildDuration: 1200
        BuildDurationModifier: 100
		BuildPaletteOrder: 16
		Prerequisites: anytier3, ~techlevel.7
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Provides even more power,\nabove triple the standard amount.
	Building:
		Footprint: xXx XxX
		Dimensions: 3,2
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 80000
	RevealsShroud:
		Range: 2c512
	WithBuildingBib:
	Power:
		Amount: 350
        RequiresCondition: !build-incomplete && !emp-affected-structure && !power-outage
    PowerMultiplier@gdib:
        Modifier: 150
        RequiresCondition: owner.is.gdib
    GrantConditionOnFaction@gdib:
		Condition: owner.is.gdib
		Factions: gdib
		ResetOnOwnerChange: True
	ScalePowerWithHealth:
	RenderSprites:
		Image: nuk3
		FactionImages:
			nod: nodnuk3
            noda: nodnuk3
            nodb: nodnuk3
            nodc: nodnuk3
            bossnod: nodnuk3
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	AffectedByPowerOutage:
		Condition: power-outage
	InfiltrateForPowerOutage:
		Types: SpyInfiltrate, SpyInfiltrate2
        Duration: 750
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate, SpyInfiltrate2
	WithDecoration@PowerOutage:
		Image: nopower
		Palette: chrome
		Sequence: powerdown-blocked
		Position: Center
		BlinkInterval: 15
		BlinkPattern: on, off
		RequiresCondition: power-outage
		RequiresSelection: False
		ValidRelationships: Ally, Neutral, Enemy
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
	SpawnActorOnDeath@HUSK:
		Actor: NUK3.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

PROC:
	Inherits: ^BaseBuilding
	Inherits@RESOURCES: ^StoresResources
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 853
	HitShape@TOP:
		Type: Rectangle
			TopLeft: -512, -1450
			BottomRight: 896, -512
	Valued:
		Cost: 1500
	Tooltip:
		Name: Tiberium Refinery
		GenericName: Refinery
        GenericStancePrefix: false
        GenericVisibility: Ally, Neutral, Enemy
	Buildable:
        BuildDuration: 2100
        BuildDurationModifier: 100
		BuildPaletteOrder: 0
		Prerequisites: fact
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Processes raw Tiberium\ninto useable resources.
	Building:
		Footprint: _x_ xxx ++x ===
		Dimensions: 3,4
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 70000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c512
	Refinery:
		DockAngle: 448
		DockOffset: 0,2
		IsDragRequired: True
		DragOffset: -554,512,0
		DragLength: 12
		TickRate: 15
		DiscardExcessResources: True
	StoresResources:
		Capacity: 1500
	Selectable:
		Bounds: 3072, 2389
		DecorationBounds: 3114, 3072
	CustomSellValue:
		Value: 600
	FreeActor:
		Actor: HARV
		SpawnOffset: 1,2
		Facing: 256
        RequiresCondition: !build-incomplete
	WithBuildingBib:
	WithResourceLevelOverlay:
		RequiresCondition: !build-incomplete
	Power:
		Amount: -30
        RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ExternalCondition@DOCKED:
		Condition: dockinprocess
		SourceCap: 1
		TotalCap: 1
	ProximityExternalCondition@DOCKED:
		Condition: docked
		Range: 1c0
		ValidRelationships: Ally
	CustomSellValue:
		Value: 300
	Sellable:
    	RefundPercent: 100
		RequiresCondition: !build-incomplete && !being-captured && !being-demolished && !dockinprocess && !emp-affected-structure
	RenderSprites:
		Image: proc
		FactionImages:
			nod: nodproc
			noda: nodproc
			nodb: nodproc
			nodc: nodproc
            bossnod: nodproc
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	InfiltrateForCash:
		Percentage: 50
		Types: ThiefInfiltrate
		InfiltratedNotification: CreditsStolen
		InfiltratedTextNotification: Credits stolen.
	Targetable@Infiltration:
        TargetTypes: ThiefInfiltrate
	ProvidesPrerequisite:
		Prerequisite: anyproc
    ResourceValueMultiplier@AIBoost:
        Modifier: 120
        RequiresCondition: ai-income-boost
    GrantConditionOnBotOwner@AIBoost:
		Condition: ai-income-boost
		Bots: normalai
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-3
	SpawnActorOnDeath@HUSK:
		Actor: PROC.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

PROC.Clone:
    Inherits: PROC
	Buildable:
		BuildPaletteOrder: 0
		Queue: Defense.GDI, Defense.Nod, Defense.BossGDI, Defense.BossNod
		Prerequisites: fact, ~techlevel.2, ~global-defenseref
	ProvidesPrerequisite@ISACOPY:
        Prerequisite: proc
	RenderSprites:
		Image: proc
		FactionImages:
			nod: nodproc
			noda: nodproc
			nodb: nodproc
			nodc: nodproc
            bossnod: nodproc
    -MapEditorData:

SILO:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x1Shape
	Inherits@RESOURCES: ^StoresResources
    Inherits@EMPMechanic: ^EMPApplicableStructure
	-GivesBuildableArea:
	-WithSpriteBody:
	-SpawnActorsOnSell:
	Armor:
		Type: Light
	Valued:
		Cost: 150
	Tooltip:
		Name: Tiberium Silo
		GenericName: Silo
        GenericStancePrefix: false
        GenericVisibility: Ally, Neutral, Enemy
	Buildable:
		BuildDuration: 300
        BuildDurationModifier: 100
		BuildPaletteOrder: 4
		Prerequisites: proc, ~techlevel.2
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Stores processed Tiberium.
	Building:
		Footprint: xx
		Dimensions: 2,1
	Health:
		HP: 30000
	RevealsShroud:
		Range: 2c512
	WithBuildingBib:
		HasMinibib: true
	WithResourceLevelSpriteBody:
		Sequence: stages
	StoresResources:
		Capacity: 1000
	Power:
		Amount: -10
        RequiresCondition: !build-incomplete
	MustBeDestroyed:
		RequiredForShortGame: false
	Selectable:
		Bounds: 2048, 1024
		DecorationBounds: 2090, 1280
	RenderSprites:
		Image: silo
		FactionImages:
			nod: nodsilo
			noda: nodsilo
			nodb: nodsilo
			nodc: nodsilo
            bossnod: nodsilo
	CashTrickler:
		Interval: 300
		InitialDelay: 300
		Amount: 200
		UseResourceStorage: true
		PauseOnCondition: lowpower || build-incomplete || emp-affected-structure
        RequiresCondition: secondaryincome-enabled
	CashTricklerBar:
		Color: FFFF9E
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
    GrantConditionOnPrerequisite@PassiveIncome:
        Condition: secondaryincome-enabled
        Prerequisites: global-secondaryincome
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
    CashTricklerMultiplier@AIBoost:
        Modifier: 120
        RequiresCondition: ai-income-boost && secondaryincome-enabled
	GrantConditionOnBotOwner@AIBoost:
		Condition: ai-income-boost
		Bots: normalai
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: SILO.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

SILO.Clone:
    Inherits: SILO
	Buildable:
		BuildPaletteOrder: 4
		Prerequisites: proc, ~techlevel.2, ~global-defenseref
		Queue: Defense.GDI, Defense.Nod, Defense.BossGDI, Defense.BossNod
	ProvidesPrerequisite@ISACOPY:
        Prerequisite: silo
	RenderSprites:
		Image: silo
		FactionImages:
			nod: nodsilo
			noda: nodsilo
			nodb: nodsilo
			nodc: nodsilo
            bossnod: nodsilo
    -MapEditorData:

PYLE:
	Inherits: ^BaseBuilding
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 840,-256,0, 840,512,0, 210,-512,0, -71,512,0
		Type: Rectangle
			TopLeft: -1024, -1024
			BottomRight: 1024, 640
	Valued:
		Cost: 300
	Tooltip:
		Name: GDI Barracks
        GenericStancePrefix: false
        GenericName: Barracks
        GenericVisibility: Ally, Neutral, Enemy
	ProvidesPrerequisite:
		Prerequisite: infantryproduction
	Buildable:
		BuildDuration: 600
        BuildDurationModifier: 100
		BuildPaletteOrder: 1
        Prerequisites: fact
		Queue: Building.GDI
		Description: Trains Infantry units.
	Building:
		Footprint: xx ++ ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 60000
	RevealsShroud:
		Range: 3c512
	WithBuildingBib:
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		SpawnOffset: -426,85,0
		ExitCell: 0,1
	Exit@2:
		SpawnOffset: 298,298,0
		ExitCell: 1,1
	Production:
		Produces: Infantry
        PauseOnCondition: build-incomplete || emp-affected-structure
	ProductionQueue:
		Type: Infantry
		DisplayOrder: 2
		Group: Infantry
		LowPowerModifier: 150
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Infantry
	GrantExternalConditionToProduced:
		Condition: produced
	Power:
		Amount: -15
        RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@gdi:
		Prerequisite: infantry.gdi
		Factions: gdi, gdia, gdib, gdic, bossgdi
        ResetOnOwnerChange: true
	ProvidesPrerequisite@e2:
		Prerequisite: infantry.e2
		Factions: gdi, gdia, gdib, gdic, bossgdi, soviet, sovieta, sovietb, sovietc, bosssoviet
        ResetOnOwnerChange: true
	ProvidesPrerequisite@rmbo:
		Prerequisite: infantry.rmbo
		Factions: gdi, gdia, gdib, gdic, bossgdi, bossnod
        ResetOnOwnerChange: true
	Selectable:
		Bounds: 2048, 1792, 0, -213
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: PYLE.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

PYL2:
    Inherits: PYLE
	Buildable:
        Prerequisites: fact
		Queue: Building.BossGDI
	SpawnActorOnDeath@HUSK:
        Actor: PYL2.Husk

HAND:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 630,-512,0, 355,512,0, -281,-512,0, -630,512,0
	Valued:
		Cost: 300
	Tooltip:
		Name: Hand of Nod
	ProvidesPrerequisite:
		Prerequisite: infantryproduction
	Buildable:
		BuildDuration: 600
        BuildDurationModifier: 100
		BuildPaletteOrder: 2
		Prerequisites: fact
		Queue: Building.Nod, Building.BossNod
		Description: Trains Infantry units.
	Building:
		Footprint: xX xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 60000
	RevealsShroud:
		Range: 3c512
	WithBuildingBib:
	WithProductionDoorOverlay:
        RequiresCondition: !build-incomplete
        Sequence: build-top
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		Priority: 2
		SpawnOffset: 512,1024,0
		ExitCell: 1,2
	Exit@2:
		SpawnOffset: -1026,380,0
		ExitCell: 0,2
	Exit@fallback1:
		SpawnOffset: -1024,256,0
		ExitCell: -1,1
	Production:
		Produces: Infantry
        PauseOnCondition: build-incomplete || emp-affected-structure
	ProductionQueue:
		Type: Infantry
		DisplayOrder: 2
		Group: Infantry
		LowPowerModifier: 150
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Infantry
	GrantExternalConditionToProduced:
		Condition: produced
	Power:
		Amount: -15
        RequiresCondition: !build-incomplete || emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@nod:
		Prerequisite: infantry.nod
		Factions: nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@rmbo:
		Prerequisite: infantry.rmbo
		Factions: gdi, gdia, gdib, gdic, bossgdi, bossnod
        ResetOnOwnerChange: true
	Selectable:
		Bounds: 2048, 2048
		DecorationBounds: 2048, 2901, 0, -426
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: HAND.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

AFLD:
	Inherits: ^BaseBuilding
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 4096, 2048
	HitShape:
		TargetableOffsets: 0,0,0, 0,-512,256, 0,-1451,384, 0,512,128, 0,1536,85
		Type: Rectangle
			TopLeft: -2048, -1024
			BottomRight: 2048, 1024
	Valued:
		Cost: 2000
	Tooltip:
		Name: Airstrip
	ProvidesPrerequisite:
		Prerequisite: vehicleproduction
	Buildable:
    	BuildDuration: 3300
        BuildDurationModifier: 100
		BuildPaletteOrder: 6
		Prerequisites: anypower, infantryproduction, ~techlevel.2
		Queue: Building.Nod
		Description: Provides a dropzone\nfor vehicle reinforcements.
	Building:
		Footprint: XXX+ xxx+ ====
		Dimensions: 4,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 100000
	RevealsShroud:
		Range: 5c512
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		SpawnOffset: -1024,0,0
		ExitCell: 3,1
	Exit@2:
		SpawnOffset: -1024,0,0
		ExitCell: 3,2
	ProductionAirdrop:
		Produces: Vehicle
		ActorType: c17
		ReadyTextNotification: Reinforcements have arrived.
        PauseOnCondition: build-incomplete || emp-affected-structure
	WithBuildingBib:
	WithIdleOverlay@DISH:
		RequiresCondition: !build-incomplete
		Sequence: idle-dish
	WithDeliveryAnimation:
		RequiresCondition: !build-incomplete
	ProductionQueue:
		Type: Vehicle
		DisplayOrder: 3
		Group: Vehicle
		LowPowerModifier: 150
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Vehicle
	Power:
		Amount: -40
        RequiresCondition: !build-incomplete || emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@nod:
		Prerequisite: vehicle.nod
		Factions: nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@mcv:
		Prerequisite: vehicle.mcv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@harv:
		Prerequisite: vehicle.harv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
	SpawnActorOnDeath@HUSK:
		Actor: AFLD.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

UFLD:
	Inherits: ^BaseBuilding
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 4096, 2048
	HitShape:
		TargetableOffsets: 0,0,0, 0,-512,256, 0,-1451,384, 0,512,128, 0,1536,85
		Type: Rectangle
			TopLeft: -2048, -1024
			BottomRight: 2048, 1024
	Valued:
		Cost: 2000
	Tooltip:
		Name: Subterranean War Factory
        GenericStancePrefix: false
        GenericName: War Factory
        GenericVisibility: Ally, Neutral, Enemy
	ProvidesPrerequisite:
		Prerequisite: vehicleproduction
	Buildable:
    	BuildDuration: 3300
        BuildDurationModifier: 100
		BuildPaletteOrder: 6
		Prerequisites: anypower, infantryproduction, ~techlevel.2
		Queue: Building.BossNod
		Description: Produces Vehicle units.
	Building:
		Footprint: XXX+ xxx+ ====
		Dimensions: 4,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 100000
	RevealsShroud:
		Range: 5c512
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		SpawnOffset: -1024,0,0
		ExitCell: 3,1
        ExitDelay: 5
	Exit@2:
		SpawnOffset: -1024,0,0
		ExitCell: 3,2
        ExitDelay: 5
	Production:
		Produces: Vehicle
        PauseOnCondition: build-incomplete || emp-affected-structure
	WithBuildingBib:
	WithProductionDoorOverlay:
		RequiresCondition: !build-incomplete
		Sequence: build-top
	ProductionQueue:
		Type: Vehicle
		DisplayOrder: 3
		Group: Vehicle
		LowPowerModifier: 150
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Vehicle
	Power:
		Amount: -40
        RequiresCondition: !build-incomplete || emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@nod:
		Prerequisite: vehicle.nod
		Factions: nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@mcv:
		Prerequisite: vehicle.mcv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@harv:
		Prerequisite: vehicle.harv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
	SpawnActorOnDeath@HUSK:
		Actor: UFLD.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

WEAP:
	Inherits: ^BaseBuilding
	Inherits@shape: ^3x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		TargetableOffsets: 0,0,0, 0,1024,0, 0,-1024,0
		Type: Rectangle
			TopLeft: -1536, -1024
			BottomRight: 1536, 512
	Valued:
		Cost: 2000
	Tooltip:
		Name: Weapons Factory
	ProvidesPrerequisite:
		Prerequisite: vehicleproduction
	Buildable:
    	BuildDuration: 3300
        BuildDurationModifier: 100
		BuildPaletteOrder: 5
		Prerequisites: anypower, infantryproduction, ~techlevel.2
		Queue: Building.GDI, Building.BossGDI
		Description: Produces Vehicle units.
	Building:
		Footprint: xxx +++ ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Selectable:
		Bounds: 3072, 2048
		DecorationBounds: 3072, 2730, 0, -682
	Health:
		HP: 80000
	RevealsShroud:
		Range: 3c0
	WithBuildingBib:
	WithProductionDoorOverlay:
		RequiresCondition: !build-incomplete
		Sequence: build-top
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		SpawnOffset: -512,-512,0
		ExitCell: 0,1
		ExitDelay: 3
	Exit@2:
		SpawnOffset: -512,-512,0
		ExitCell: 0,2
		ExitDelay: 3
	Production:
		Produces: Vehicle
        PauseOnCondition: build-incomplete || emp-affected-structure
	ProductionQueue:
		Type: Vehicle
		DisplayOrder: 3
		Group: Vehicle
		LowPowerModifier: 150
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Vehicle
	Power:
		Amount: -40
        RequiresCondition: !build-incomplete || emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@gdi:
		Prerequisite: vehicle.gdi
		Factions: gdi, gdia, gdib, gdic, bossgdi
        ResetOnOwnerChange: true
	ProvidesPrerequisite@mcv:
		Prerequisite: vehicle.mcv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@harv:
		Prerequisite: vehicle.harv
		Factions: gdi, gdia, gdib, gdic, bossgdi, nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	-ActorPreviewPlaceBuildingPreview:
	SequencePlaceBuildingPreview:
		Sequence: place
		SequenceAlpha: 0.65
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
	SpawnActorOnDeath@HUSK:
		Actor: WEAP.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

FIX:
	Inherits: ^BaseBuilding
    Inherits@EMPMechanic: ^EMPApplicableStructure    
	HitShape:
		TargetableOffsets: 840,0,0, 598,-640,0, 598,640,0, -1060,0,0, -768,-640,0, -768,640,0
		Type: Polygon
			Points: -1536,-256, -341,-940, 341,-940, 1536,-256, 1536,341, 341,1110, -341,1110, -1536,341
	Valued:
		Cost: 800
	Tooltip:
		Name: Service Depot
	Buildable:
        BuildDuration: 1350
        BuildDurationModifier: 100
		BuildPaletteOrder: 9
		Prerequisites: vehicleproduction, ~techlevel.3
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Repairs Vehicles and Aircraft.\n\nCan sell Vehicles and Aircraft.
	Building:
		Footprint: =+= +++ =+=
		Dimensions: 3,3
	Selectable:
		Bounds: 2730, 1450, 0, 128
		DecorationBounds: 3072, 2048
	Health:
		HP: 70000
	RevealsShroud:
		Range: 3c0
	WithBuildingBib:
		HasMinibib: true
	WithResupplyAnimation:
		RequiresCondition: !build-incomplete && !emp-affected-structure
	Reservable:
	RepairsUnits:
		HpPerStep: 1000
        Interval: 26
		PlayerExperience: 0
		StartRepairingNotification: Repairing
		StartRepairingTextNotification: Repairing.
        FinishRepairingNotification: UnitRepaired
        FinishRepairingTextNotification: Unit repaired.
        PauseOnCondition: emp-affected-structure
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	Power:
		Amount: -20
        RequiresCondition: !build-incomplete
	ProvidesPrerequisite@buildingname:
	ProximityExternalCondition:
		Condition: unit.sellable
		Range: 1c0
	Sellable:
		RequiresCondition: !unit.docked && !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ExternalCondition@Docked:
		Condition: unit.docked
	ProximityExternalCondition@AIRCRAFTREPAIR:
		Condition: aircraft-repair
		Range: 5c256
	WithRangeCircle@AIRCRAFTREPAIR:
		Color: 888899AA
		Range: 5c256
	RenderSprites:
		Image: fix
		FactionImages:
			nod: nodfix
            noda: nodfix
            nodb: nodfix
            nodc: nodfix
            bossnod: nodfix
	ProvidesPrerequisite:
		Prerequisite: anyfix
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
	SpawnActorOnDeath@HUSK:
		Actor: FIX.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

HPAD:
	Inherits: ^BaseBuilding
    Inherits@AIRCRAFTREPAIR: ^RepairsAircraftWithRepairBay
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 2048, 2048
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 768,-512,0, 768,512,0, -281,-512,0, -630,512,0
	Valued:
		Cost: 300
	Tooltip:
		Name: Helipad
	Buildable:
		BuildDuration: 600
        BuildDurationModifier: 100
		BuildPaletteOrder: 8
		Prerequisites: vehicleproduction, ~!player.gdia, ~techlevel.5
		Queue: Building.GDI, Building.Nod, Building.Allies, Building.BossGDI, Building.BossAllies
		Description: Produces and reloads Helicopters.\nAlso can repair helicopters if\nwithin Service Depot radius. 
	Building:
		Footprint: =x x=
		Dimensions: 2,2
	Health:
		HP: 40000
	RevealsShroud:
		Range: 3c512
	Exit@1:
		SpawnOffset: 0,-256,0
		ExitCell: 0,0
		Facing: 896
        ProductionTypes: Aircraft, Chopper
	Production:
		Produces: Aircraft, Chopper
        PauseOnCondition: build-incomplete || emp-affected-structure
	Reservable:
	WithResupplyAnimation:
		RequiresCondition: !build-incomplete && !emp-affected-structure
	RallyPoint:
	CommandBarBlacklist:
		DisableStop: false
	ProductionQueue:
		Type: Aircraft
		DisplayOrder: 4
		Group: Aircraft
		LowPowerModifier: 150
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
        Sticky: false
	ProductionBar:
		ProductionType: Aircraft
	Power:
		Amount: -20
        RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@gdi:
		Prerequisite: aircraft.gdi
		Factions: gdi, gdia, gdib, gdic, bossgdi
        ResetOnOwnerChange: true
	ProvidesPrerequisite@nod:
		Prerequisite: aircraft.nod
		Factions: nod, noda, nodb, nodc, bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@allies:
		Prerequisite: aircraft.allies
		Factions: allies, alliesa, alliesb, alliesc, bossallies
        ResetOnOwnerChange: true
	ProvidesPrerequisite@soviet:
		Prerequisite: aircraft.soviet
		Factions: soviet, sovieta, sovietb, sovietc, bosssoviet
        ResetOnOwnerChange: true
    WithBuildingBib:
	FreeActor@1:
		Actor: ORCA
		Facing: 896
		SpawnOffset: 0,1
		RequiresCondition: !build-incomplete && gdi.player && gratisair
	FreeActor@2:
		Actor: HELI
		Facing: 896
		SpawnOffset: 0,1
		RequiresCondition: !build-incomplete && nod.player && gratisair
	FreeActor@3:
		Actor: HEL2
		Facing: 896
		SpawnOffset: 0,1
		RequiresCondition: !build-incomplete && allies.player && gratisair
	FreeActor@4:
		Actor: HIND
		Facing: 896
		SpawnOffset: 0,1
		RequiresCondition: !build-incomplete && soviet.player && gratisair
	FreeActor@5:
		Actor: RH66
		Facing: 896
		SpawnOffset: 0,1
		RequiresCondition: !build-incomplete && bossnod.player && gratisair
	GrantConditionOnFaction@GDI:
		Condition: gdi.player
		Factions: gdi, gdia, gdib, gdic, bossgdi
		ResetOnOwnerChange: True
	GrantConditionOnFaction@Nod:
		Condition: nod.player
		Factions: nod, noda, nodb, bossnod
		ResetOnOwnerChange: True
	GrantConditionOnFaction@Allies:
		Condition: allies.player
		Factions: allies, alliesa, alliesb, alliesc
		ResetOnOwnerChange: True
	GrantConditionOnFaction@Soviet:
		Condition: soviet.player
		Factions: soviet, sovieta, sovietb, sovietc
		ResetOnOwnerChange: True
	GrantConditionOnFaction@Blackhand:
		Condition: bossnod.player
		Factions: bossnod
		ResetOnOwnerChange: True
	GrantConditionOnPrerequisite@FREEAIRCRAFT:
		Prerequisites: global-freeaircraft
		Condition: gratisair
	ProductionCostMultiplier@FREEAIRCRAFT:
		Multiplier: 500
		Prerequisites: global-freeaircraft
	ProductionTimeMultiplier@FREEAIRCRAFT:
		Multiplier: 350
		Prerequisites: global-freeaircraft
	ProximityExternalCondition:
		Condition: unit.sellable
		Range: 1c0
	Sellable:
		RequiresCondition: !unit.docked && !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	ExternalCondition@Docked:
		Condition: unit.docked
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-1
	SpawnActorOnDeath@HUSK:
		Actor: HPAD.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

HQ:
	Inherits: ^BaseBuilding
	Inherits@IDISABLE: ^DisabledOverlay
    Inherits@EMPMechanic: ^EMPApplicableStructure    
	HitShape:
		TargetableOffsets: 0,0,0, 0,512,0, 120,-598,0
		Type: Rectangle
			TopLeft: -1024, -384
			BottomRight: 1024, 1024
	Valued:
		Cost: 1000
	Tooltip:
		Name: Communications Center
	ProvidesPrerequisite:
		Prerequisite: anyhq
    GrantConditionOnFaction@gdia:
        Condition: owner.is.gdia
        Factions: gdia
        ResetOnOwnerChange: true
	Buildable:
    	BuildDuration: 1500
        BuildDurationModifier: 100
		BuildPaletteOrder: 10
		Prerequisites: anyproc, vehicleproduction, ~techlevel.3
		Queue: Building.GDI, Building.Nod, Building.BossGDI, Building.BossNod
		Description: Provides Radar and 'Radar Scan' support-power.\nRequires power to operate.
	Building:
		Footprint: X_ xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Selectable:
		Bounds: 2048, 1706, 0, 384
		DecorationBounds: 2048, 2261, 0, -170
	WithSpriteBody:
		PauseOnCondition: lowpower || emp-affected-structure
	Health:
		HP: 90000
	RevealsShroud:
		Range: 10c0
	WithBuildingBib:
	ProvidesRadar:
		RequiresCondition: !jammed && !lowpower && !build-incomplete && !emp-affected-structure
	RenderDetectionCircle:
	DetectCloaked:
        DetectionTypes: Stealth, AirStealth, Underground, Underwater
		Range: 5c0
		RequiresCondition: !lowpower && !build-incomplete && !emp-affected-structure
	Power:
		Amount: -50
        RequiresCondition: !build-incomplete && !emp-affected-structure
	RenderSprites:
		Image: hq
		FactionImages:
			nod: nodhq
            noda: nodhq
            nodb: nodhq
            nodc: nodhq
            bossnod: nodhq
	SpawnActorPower@RadarScan:
		PauseOnCondition: lowpower || jammed || emp-affected-structure
        RequiresCondition: !owner.is.gdia
		OrderName: RadarScan
		Actor: camera.scan
		LifeTime: 300
		ChargeInterval: 3750
		Icon: radarscan
		Name: Radar Scan 
		Description: Reveals an area of the map.   \nDetects cloaked units there.\n\nLasts for 12 seconds.
		StartFullyCharged: false
		EndChargeSpeechNotification: RadarScanReady
        EndChargeTextNotification: Radar Scan ready.
		SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
		Cursor: chrono-target
		SupportPowerPaletteOrder: 4
		EffectImage: sonarbox
		EffectSequence: scanping
		EffectPalette: effect
		DeploySound: reveal1.aud
	AirstrikePower@ReconDrone:
        PauseOnCondition: lowpower || jammed || emp-affected-structure
        RequiresCondition: owner.is.gdia
		OrderName: ReconDrone
		Prerequisites: anyafld
		Icon: reconuav
		ChargeInterval: 4500
		Name: Recon Drone  
		Description: Reveals a strip of the map.\nDetects cloaked units in sight.
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: ReconDroneAvailable
		SelectTargetTextNotification: Select target.
		EndChargeTextNotification: Recon Drone available.
		UnitType: uav
		QuantizedFacings: 8
		DisplayBeacon: true
		BeaconPoster: uavbcon
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		UseDirectionalTarget: True
		DirectionArrowAnimation: paradirection
        SupportPowerPaletteOrder: 5
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	ExternalCondition@JAMMED:
		Condition: jammed
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
    WithColoredOverlay@IDISABLE:
        RequiresCondition: lowpower && !emp-affected-structure
	ProvidesPrerequisite@WIRELESS:
		Prerequisite: activeradar
		RequiresCondition: !jammed && !lowpower && !build-incomplete
    WithIdleOverlay@1:
        Palette: effect
        Sequence: white-light
        Offset: 640,300,0
        PauseOnCondition: lowpower
        RequiresCondition: !build-incomplete
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
	SpawnActorOnDeath@HUSK:
		Actor: HQ.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
	InfiltrateForExploration:
		Types: SpyInfiltrate2
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate2

MISS:
	Inherits: ^BaseBuilding
	Inherits@shape: ^3x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 3072, 2048
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 840,0,0, 840,-1024,0, 420,768,0, -840,0,0, -840,-1024,0, -840,1024,0
	Building:
		Footprint: xx_ xxx ===
		Dimensions: 3,3
        LocalCenterOffset: 0,-256,0
	Buildable:
    	BuildDuration: 3300
        BuildDurationModifier: 100
		BuildPaletteOrder: 12
		BuildLimit: 1
		Prerequisites: vehicleproduction, anyhq, ~techlevel.6
		Queue: Building.GDI, Building.BossGDI, Building.BossNod
		Description: Maximum one can be built.\n\nUnlocks higher-tech units and buildings.
	Valued:
		Cost: 2000
	Tooltip:
		Name: Technology Center
	Health:
		HP: 100000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c0
	WithBuildingBib:
	Power:
		Amount: -100
		RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite:
		Prerequisite: anytier3
	AirstrikePower@AirStrike:
		OrderName: AirStrike
		PauseOnCondition: lowpower || emp-affected-structure
        RequiresCondition: owner.is.gdi
		Prerequisites: ~eye, ~global-superweapons
		Icon: airstrike
		ChargeInterval: 6750
		SquadSize: 1
		QuantizedFacings: 8
		Name: Air Strike
		Description: Deploy an aerial napalm strike.\nBurns buildings and infantry along a line.
		EndChargeSpeechNotification: AirstrikeReady
        EndChargeTextNotification: Airstrike ready.
        LaunchSpeechNotification: AirstrikeInbound
        LaunchTextNotification: Airstrike inbound.
        SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
        IncomingSpeechNotification: EnemyPlanesApproaching
        IncomingTextNotification: Enemy planes approaching.
        InsufficientPowerTextNotification: Insufficient power.
		UnitType: a10
		DisplayBeacon: True
		BeaconPoster: airstrike
		DisplayRadarPing: True
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		UseDirectionalTarget: True
		DirectionArrowAnimation: paradirection
		Cursor: airstrike
        CameraActor: camera.small
		SupportPowerPaletteOrder: 2
	SupportPowerChargeBar:
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
    GrantConditionOnFaction@GDI:
        Condition: owner.is.gdi
        Factions: gdi, gdib, gdic, bossgdi
        ResetOnOwnerChange: true
	SpawnActorsOnSell:
		ActorTypes: e6,tecn,tecn,tecn,e1,e1
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
	RenderSprites:
		Image: miss
		FactionImages:
            bossnod: nodmiss
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
	SpawnActorOnDeath@HUSK:
		Actor: MISS.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate2
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate2

TMPL:
	Inherits: ^BaseBuilding
	Inherits@IDISABLE: ^DisabledOverlay
	Inherits@shape: ^3x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 0,-896,0, 0,896,0, 840,0,0, -706,0,0, -706,-768,0, -706,640,0
	Valued:
		Cost: 3000
	Tooltip:
		Name: Temple of Nod
	Buildable:
    	BuildDuration: 5100
        BuildDurationModifier: 100
		BuildPaletteOrder: 13
		BuildLimit: 1
		Prerequisites: vehicleproduction, anyhq, ~techlevel.6
		Queue: Building.Nod
		Description: Maximum one can be built.\n\nUnlocks higher-tech units and buildings.\n\nPrepares and launches a 'Nuclear Strike'\n(requires Biological Laboratory to charge-up)
	Building:
		Footprint: xXx xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Selectable:
		Bounds: 3072, 2048
		DecorationBounds: 3072, 2901, 0, -512
	Health:
		HP: 200000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c0
	NukePower@NuclearStrike:
		OrderName: NukeMissile
		PauseOnCondition: lowpower || emp-affected-structure || !bio-available
		Prerequisites: ~!owner.is.noda, ~global-superweapons
		Icon: abomb
		Cursor: nuke
		ChargeInterval: 13500
		Name: Nuclear Strike
		Description: Launch a tactical nuclear warhead.\nApplies heavy damage over a large area.
		EndChargeSpeechNotification: NuclearWeaponAvailable
        EndChargeTextNotification: Nuclear weapon available.
		SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
		InsufficientPowerSpeechNotification: InsufficientPower
        InsufficientPowerTextNotification: Insufficient power.
		LaunchSpeechNotification: NuclearWeaponLaunched
        LaunchTextNotification: Nuclear weapon launched.
		IncomingSpeechNotification: NuclearWarheadApproaching
        IncomingTextNotification: Nuclear warhead approaching.
		MissileWeapon: atomic
        MissileImage: atomic
		MissileDelay: 11
		SpawnOffset: 3c0,0,-1c512
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayBeacon: True
		BeaconPoster: atomic
		BeaconPosterPalette: beaconposter
		DisplayRadarPing: True
		CameraRange: 10c0
        CameraRemoveDelay: 50
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		SupportPowerPaletteOrder: 1
	NukePower@DirtyNuclearStrike:
		OrderName: DirtyNukeMissile
		PauseOnCondition: lowpower || emp-affected-structure || !bio-available
		Prerequisites: ~owner.is.noda, ~global-superweapons
		Icon: dbomb
		Cursor: nuke
		ChargeInterval: 13500
		Name: Dirty Nuclear Strike
		Description: Launch a tactical nuclear warhead,\nenhanced with Tiberium.\nApplies heavy damage over a large area.\nIt may mutate Infantry, seeds Tiberium.
		EndChargeSpeechNotification: NuclearWeaponAvailable
        EndChargeTextNotification: Nuclear weapon available.
		SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
		InsufficientPowerSpeechNotification: InsufficientPower
        InsufficientPowerTextNotification: Insufficient power.
		LaunchSpeechNotification: NuclearWeaponLaunched
        LaunchTextNotification: Nuclear weapon launched.
		IncomingSpeechNotification: NuclearWarheadApproaching
        IncomingTextNotification: Nuclear warhead approaching.
		MissileWeapon: atomicdirty
        MissileImage: atomic
		MissileDelay: 11
		SpawnOffset: 3c0,0,-1c512
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayBeacon: True
		BeaconPoster: atomic
		BeaconPosterPalette: beaconposter
		DisplayRadarPing: True
		CameraRange: 10c0
        CameraRemoveDelay: 50
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		SupportPowerPaletteOrder: 1
    GrantConditionOnPrerequisite@BioCheck:
        Condition: bio-available
        Prerequisites: bio
	WithSupportPowerActivationAnimation:
		RequiresCondition: !build-incomplete
	WithSupportPowerActivationOverlay:
		RequiresCondition: !build-incomplete
		Sequence: smoke
	SupportPowerChargeBar:
	Power:
		Amount: -150
		RequiresCondition: !build-incomplete && !emp-affected-structure
	WithBuildingBib:
	ProvidesPrerequisite@buildingname:
    ProvidesPrerequisite@noda:
        Prerequisite: owner.is.noda
        Factions: noda
        ResetOnOwnerChange: True
	ProvidesPrerequisite:
		Prerequisite: anytier3
	SpawnActorsOnSell:
		ActorTypes: e6,tecn,tecn,tecn,e1,e1
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
    WithColoredOverlay@IDISABLE:
        RequiresCondition: lowpower && !emp-affected-structure
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-5
	SpawnActorOnDeath@HUSK:
		Actor: TMPL.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate2
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate2

EYE:
	Inherits: ^BaseBuilding
	Inherits@IDISABLE: ^DisabledOverlay
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		TargetableOffsets: 0,0,0, 0,512,128, 120,-598,0
		Type: Rectangle
			TopLeft: -1024, -384
			BottomRight: 1024, 1024
	Valued:
		Cost: 1800
	Tooltip:
		Name: Advanced Communications Center
	ProvidesPrerequisite:
		Prerequisite: anyhq
	Buildable:
        BuildDuration: 3000
        BuildDurationModifier: 100
		BuildPaletteOrder: 14
		Prerequisites: miss, ~techlevel.7
		Queue: Building.GDI, Building.BossGDI
		BuildLimit: 1
		Description: Maximum one can be built.\n\nProvides Radar and 'Ion Cannon' super-weapon.\nEnables 'Airstrike' at Technology Center.\nRequires power to operate.
	Building:
		Footprint: X_ xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Selectable:
		Bounds: 2048, 1706, 0, 384
		DecorationBounds: 2048, 2261, 0, -170
	WithSpriteBody:
		PauseOnCondition: lowpower || emp-affected-structure
	Health:
		HP: 90000
	RevealsShroud:
		Range: 10c0
	WithBuildingBib:
	ProvidesRadar:
		RequiresCondition: !jammed && !lowpower && !build-incomplete && !emp-affected-structure
	RenderDetectionCircle:
	DetectCloaked:
        DetectionTypes: Stealth, AirStealth, Underground, Underwater
        Range: 5c0
		RequiresCondition: !lowpower && !build-incomplete && !emp-affected-structure
	IonCannonPower@IonCannon:
		PauseOnCondition: lowpower || jammed || emp-affected-structure
		Prerequisites: ~global-superweapons
		OrderName: IonCannon
		Icon: ioncannon
		Cursor: ioncannon
		ChargeInterval: 10500
		Name: Ion Cannon
		Description: Initiate an Ion Cannon strike.\nApplies instant damage to a small area.
		BeginChargeSpeechNotification: IonCannonCharging
        BeginChargeTextNotification: Ion cannon charging.
		EndChargeSpeechNotification: IonCannonReady
        EndChargeTextNotification: Ion cannon ready.
		SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
		InsufficientPowerSpeechNotification: InsufficientPower
		OnFireSound: ion1.aud
		DisplayRadarPing: True
		CameraActor: camera.small
		SupportPowerPaletteOrder: 1
		DisplayTimerRelationships: Ally, Neutral, Enemy
	SupportPowerChargeBar:
	Power:
		Amount: -100
		RequiresCondition: !build-incomplete && !emp-affected-structure
	ProvidesPrerequisite@buildingname:
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	ActorPreviewPlaceBuildingPreview:
		Animated: false
	ExternalCondition@JAMMED:
		Condition: jammed
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
    WithColoredOverlay@IDISABLE:
        RequiresCondition: lowpower && !emp-affected-structure
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
	SpawnActorOnDeath@HUSK:
		Actor: EYE.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate2
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate2

BIO:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	SelectionDecorations:
	Selectable:
		Bounds: 2048, 2048
	Building:
		Footprint: xx xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 70000
	Valued:
		Cost: 800
	Buildable:
    	BuildDuration: 3900
        BuildDurationModifier: 100
        BuildPaletteOrder: 15
		BuildLimit: 1
		Prerequisites: tmpl, ~techlevel.7
		Queue: Building.Nod
		Description: Maximum one can be built.\n\nEnables 'Nuclear Strike' super-weapon to charge.\nUnlocks Chemical Trooper and SSM Launcher.
	Tooltip:
		Name: Research Laboratory
	ProvidesPrerequisite@buildingname:
	Power:
		Amount: -60
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 3c0
	WithBuildingBib:
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
 	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
	SpawnActorOnDeath@HUSK:
		Actor: BIO.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

NCOM:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	Selectable:
		Bounds: 2048, 2048
	HitShape:
		UseTargetableCellsOffsets: false
		TargetableOffsets: 0,0,0, 640,-384,0, 640,512,0, -710,-512,0, -710,512,0
	Buildable:
    	BuildDuration: 1500
        BuildDurationModifier: 100
		BuildPaletteOrder: 13
		BuildLimit: 1
		Prerequisites: miss, ~techlevel.7
		Queue: Building.BossNod
		Description: Maximum one can be built.\n\nUnlocks Infiltrator and Scorpion Tank.\n\nProvides 'Stealth Airstrike' super-weapon.
	Building:
		Footprint: xx xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Valued:
		Cost: 1000
	Tooltip:
		Name: Headquarters
	Health:
		HP: 60000
	Armor:
		Type: Medium
	RevealsShroud:
		Range: 5c0
	WithBuildingBib:
	Power:
		Amount: -50
	AirstrikePower@StealthAirStrike:
		PauseOnCondition: lowpower || emp-affected-structure
        RequiresCondition: owner.is.blackhand
		OrderName: StealthAirStrike
		Prerequisites: ~global-superweapons
		Icon: airstrike2
		ChargeInterval: 6750
		SquadSize: 1
		QuantizedFacings: 8
		Name: Stealth Air Strike
		Description: Deploy an aerial napalm strike.\nBurns buildings and infantry along a line.
		EndChargeSpeechNotification: AirstrikeReady
        EndChargeTextNotification: Airstrike ready.
        LaunchSpeechNotification: AirstrikeInbound
        LaunchTextNotification: Airstrike inbound.
        SelectTargetSpeechNotification: SelectTarget
        SelectTargetTextNotification: Select target.
        IncomingSpeechNotification: EnemyPlanesApproaching
        IncomingTextNotification: Enemy planes approaching.
        InsufficientPowerTextNotification: Insufficient power.
		UnitType: sfig
		DisplayBeacon: True
		BeaconPoster: airstrike
		DisplayRadarPing: True
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		UseDirectionalTarget: True
		DirectionArrowAnimation: paradirection
		Cursor: airstrike
		SupportPowerPaletteOrder: 2
        CameraActor: camera.small
	SupportPowerChargeBar:
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
    GrantConditionOnFaction@Blackhand:
        Condition: owner.is.blackhand
        Factions: bossnod
        ResetOnOwnerChange: true
	ProvidesPrerequisite@buildingname:
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
    WithIdleOverlay@1:
        Palette: effect
        Sequence: red-light
        Offset: 200,400,0
        PauseOnCondition: lowpower
        RequiresCondition: !build-incomplete
	SpawnActorOnDeath@HUSK:
		Actor: NCOM.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate2
        InfiltratedNotification: BuildingInfiltrated
		InfiltratedTextNotification: Building Infiltrated.
	Targetable@Infiltration:
        TargetTypes: SpyInfiltrate2

SGEN:
	Inherits: ^BaseBuilding
	Inherits@shape: ^3x2Shape
	Inherits@IDISABLE: ^DisabledOverlay
    Inherits@EMPMechanic: ^EMPApplicableStructure
	HitShape:
		UseTargetableCellsOffsets: true
		Type: Rectangle
			TopLeft: -1536, -1024
			BottomRight: 1536, 1024
	SelectionDecorations:
	Selectable:
		Bounds: 3072, 2048
		DecorationBounds: 3072, 2148, 0, -320
	Building:
		Footprint: XXx XXx
		Dimensions: 3,2
		LocalCenterOffset: 0,0,0
	Health:
		HP: 80000
	Armor:
		Type: Heavy
	Valued:
		Cost: 1600
	Buildable:
    	BuildDuration: 2200
        BuildDurationModifier: 100
        BuildPaletteOrder: 16
		BuildLimit: 1
		Prerequisites: miss, ~global-superweapons, ~techlevel.7
		Queue: Building.BossNod
		Description: Maximum one can be built.\n\nEnables the usage of 'Stealth Field'\nto activate cloaking when ready.
	Tooltip:
		Name: Stealth Generator
	ProvidesPrerequisite@buildingname:
	Power:
		Amount: -150
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 3c0
	WithBuildingBib:
    #  made it not sellable while cloaking to avoid persistency glitch
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure && !cloakingfield-active
	GrantPrerequisiteChargeDrainPower@StealthGenerator:
		PauseOnCondition: lowpower
        Prerequisite: cloakingfield-active
		OrderName: CloakingField
		DischargeModifier: 300
		ActiveText: ACTIVE
		AvailableText: READY
		ChargeInterval: 4500 #  6-minutes cloaking was insane, reduced to 3min
		Icon: cloakfield
		Name: Stealth Field
		Description: Activate to render everything invisible\nwithin a radius of 12-cells.\nDoes not cloak moving, or flying units.\n\nCan be toggled active once charged.
        LaunchSound: cloak6.aud
		InsufficientPowerSpeechNotification: InsufficientPower
		InsufficientPowerTextNotification: Insufficient power.
		BeginChargeSpeechNotification: IronCurtainCharging
		BeginChargeTextNotification: Cloaking field charging.
		EndChargeSpeechNotification: IronCurtainReady
		EndChargeTextNotification: Cloaking field ready.
		SupportPowerPaletteOrder: 2
        AllowMultiple: true
 	SupportPowerChargeBar:
    #   the initial pulse animation
    WithSupportPowerActivationAnimation:
    	RequiresCondition: !build-incomplete
    #   to keep pulsing while active
    WithIdleAnimation@StealthGenerator:
        Interval: 23
        RequiresCondition: cloakingfield-active
    ProvidesPrerequisite@StealthGeneratorOffline:
        Prerequisite: cloakingfield-stop
        RequiresCondition: lowpower
	GrantConditionOnPrerequisite@StealthGenerator:
		Condition: cloakingfield-active
		Prerequisites: cloakingfield-active, !cloakingfield-stop
	ProximityExternalCondition@StealthGenerator:
		Condition: cloakfield-on
        ValidRelationships: Ally
		Range: 12c0
        RequiresCondition: cloakingfield-active
	DetectCloaked@RadialIndicator:
        DetectionTypes: Nonsense
		Range: 12c0
        RequiresCondition: cloakingfield-active
	RenderDetectionCircle@RadialIndicator:
        TrailCount: 2
        Visible: Always
        UpdateLineTick: 6
        BorderWidth: 0
        Color: 8b008b
	MustBeDestroyed:
		RequiredForShortGame: false
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-4
    -ExternalCondition@CloakingField:
    -Cloak@CloakingField:
    -GrantConditionOnDamageState@UNCLOAK:
	SpawnActorOnDeath@HUSK:
		Actor: SGEN.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished

INFANTRYPRODUCTION:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Infantry Production

VEHICLEPRODUCTION:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Vehicle Production

ANYPOWER:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Any Power Generation

ANYHQ:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: A Radar Structure

ANYTIER3:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Tech Center or Temple of Nod

H2SP:
	Inherits: ^BaseBuilding
	Inherits@shape: ^2x2Shape
    Inherits@EMPMechanic: ^EMPApplicableStructure
	SelectionDecorations:
	Selectable:
		Bounds: 2048, 2048
	Building:
		Footprint: xx xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 40000
	Valued:
		Cost: 1000
	Buildable:
    	BuildDuration: 1500
        BuildDurationModifier: 100
        BuildPaletteOrder: 15
		BuildLimit: 1
		Prerequisites: miss, ~player.gdic, ~techlevel.7
		Queue: Building.GDI
		Description: Maximum one can be built.\n\nEnables Infantry to self-heal.\nUnlocks Ambulance and Blackhawk for production.
	Tooltip:
		Name: GDI Hospital
	ProvidesPrerequisite@buildingname:
    ProvidesPrerequisite@ISCOPY:
        Prerequisite: hosp
        RequiresCondition: !emp-affected-structure
	Power:
		Amount: -40
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 3c0
	WithBuildingBib:
    Sellable:
        RequiresCondition: !build-incomplete && !being-demolished && !being-captured && !emp-affected-structure
 	Capturable:
		RequiresCondition: !build-incomplete
		Types: building-player, building-player-2
	SpawnActorOnDeath@HUSK:
		Actor: H2SP.Husk
        OwnerType: Victim
        EffectiveOwnerFromOwner: true
        RequiresCondition: husks-enabled && !being-demolished
    RenderSprites:
        Image: hosp
